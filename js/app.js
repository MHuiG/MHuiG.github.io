var customSearch,Debounce=function(o,t){var a=t||200,n=void 0;return function(){var t=this,e=arguments;n&&clearTimeout(n),n=setTimeout(function(){n=null,o.apply(t,e)},a)}};!function(i){"use strict";volantis.$bodyAnchor=i("#safearea"),volantis.$topBtn=i("#s-top"),volantis.$wrapper=i("#wrapper"),volantis.$postsBtn=i(".menu .active"),volantis.$titleBtn=i("h1.title","#header-meta"),volantis.$coverAnchor=i("#l_cover .cover-wrapper"),volantis.$switcher=i("#l_header .switcher .s-search"),volantis.$header=i("#l_header"),volantis.$tabs=i(".tabs"),volantis.$headerMenu=i("body .navigation"),volantis.$search=i("#l_header .m_search"),volantis.$mPhoneList=i("#l_header .m-phone .list-v");var t,e=/mobile/i.test(window.navigator.userAgent),n=80;function s(t,e){var o=1<arguments.length&&void 0!==e?e:n,a=t.href?i(decodeURI(t.getAttribute("href"))):i(t);window.scrollTo({top:a.offset().top-o,behavior:"smooth"})}function o(){volantis.$postsBtn.length&&volantis.$bodyAnchor&&volantis.$postsBtn.click(function(t){t.preventDefault(),t.stopPropagation(),"/"!=volantis.$postsBtn.attr("href")&&s(volantis.$bodyAnchor),t.stopImmediatePropagation(),volantis.$postsBtn.unbind("click")}),volantis.$titleBtn.length&&volantis.$bodyAnchor&&volantis.$titleBtn.click(function(t){t.preventDefault(),t.stopPropagation(),s(volantis.$bodyAnchor),t.stopImmediatePropagation(),volantis.$titleBtn.unbind("click")}),volantis.$topBtn.length&&volantis.$bodyAnchor&&volantis.$topBtn.click(function(t){t.preventDefault(),t.stopPropagation(),s(volantis.$bodyAnchor),t.stopImmediatePropagation()});var t=i("#pjax-enable-cover").text(),o=0,a=0;t&&volantis.$coverAnchor[0]&&("none"!==i(".cover-wrapper#half").css("display")&&(a=240),o=volantis.$coverAnchor[0].clientHeight-a);var n=document.body.scrollTop+a;i(document,window).scroll(Debounce(function(){var t=i(window).scrollTop(),e=(t+=a)-n;240<(n=t)?(volantis.$topBtn.addClass("show"),0<e?volantis.$topBtn.removeClass("hl"):volantis.$topBtn.addClass("hl")):volantis.$topBtn.removeClass("show").removeClass("hl"),-1<t-o?volantis.$header.addClass("show"):volantis.$header.removeClass("show")}))}function a(){var o;"true"==i.trim(i("#pjax-ispage").text())&&(window.subData={title:i.trim(i("#pjax-pageTitle").text()),tools:!0}),window.subData&&(volantis.$comment=i("#s-comment"),volantis.$toc=i("#s-toc"),volantis.$commentTarget=i("#l_body article#comments"),volantis.$wrapper.find(".nav-sub .title").text(window.subData.title),o=document.body.scrollTop,i(document,window).scroll(Debounce(function(){var t=i(window).scrollTop(),e=t-o;50<=e&&100<t?(o=t,volantis.$wrapper.addClass("sub")):e<=-50&&(o=t,volantis.$wrapper.removeClass("sub"))})),volantis.$commentTarget.length?volantis.$comment.click(function(t){t.preventDefault(),t.stopPropagation(),s(volantis.$commentTarget),t.stopImmediatePropagation()}):volantis.$comment.remove(),volantis.$tocTarget=i("#l_body .toc-wrapper"),volantis.$tocTarget.length&&volantis.$tocTarget.children().length?(volantis.$toc.click(function(t){t.stopPropagation(),volantis.$tocTarget.toggleClass("active"),volantis.$toc.toggleClass("active")}),i(document).click(function(t){t.stopPropagation(),volantis.$tocTarget.removeClass("active"),volantis.$toc.removeClass("active")}),i(document,window).scroll(Debounce(function(){volantis.$tocTarget.removeClass("active"),volantis.$toc.removeClass("active")},100))):volantis.$toc.remove())}function l(){volantis.$headerMenu.find("li a.active").removeClass("active"),volantis.$headerMenu.find("div a.active").removeClass("active");var t=null,e=location.pathname.replace(/\/|%|\./g,"");0==e.length&&(e="home");var o=e.match(/page\d{0,}$/g);o&&(o=o[0],e=e.split(o)[0]);var a=e.match(/index.html/);a&&(a=a[0],e=e.split(a)[0]),(e=e.replace(/(\[|\]|~|#|@)/g,"\\$1"))&&volantis.$headerMenu&&((t=i("#"+e,volantis.$headerMenu))&&t.length&&t.addClass("active").siblings().removeClass("active"))}function r(){e&&(i(document).click(function(t){volantis.$mPhoneList.hide()}),i(window).scroll(Debounce(function(){volantis.$mPhoneList.hide()})))}function c(){if(0!==volantis.$tabs.length){for(var t=volantis.$tabs.find(".nav-tabs .tab"),e=0;e<t.length;e++){var o=volantis.$tabs.find(t[e].children[0]);o.addClass(o.attr("href")),o.removeAttr("href")}i(".tabs .nav-tabs").on("click","a",function(t){t.preventDefault(),t.stopPropagation();var e=i(t.target.parentElement.parentElement.parentElement);return e.find(".nav-tabs .active").removeClass("active"),e.find(t.target.parentElement).addClass("active"),e.find(".tab-content .active").removeClass("active"),e.find(i(t.target).attr("class")).addClass("active"),!1})}}volantis.$header[0]&&(n=volantis.$header[0].clientHeight+16),i(function(){a(),l(),e?i("#l_header .m-phone li").click(function(t){t.stopPropagation(),i(i(t.currentTarget).children("ul")).show()}):i("#wrapper .m-pc li > a[href]").parent().click(function(t){t.stopPropagation(),t.target.origin==t.target.baseURI&&i("#wrapper .m-pc .list-v").hide()}),r(),0!==volantis.$switcher.length&&(volantis.$switcher.click(function(t){t.stopPropagation(),volantis.$header.toggleClass("z_search-open"),volantis.$switcher.toggleClass("active"),volantis.$search.find("input").focus()}),i(document).click(function(t){volantis.$header.removeClass("z_search-open"),volantis.$switcher.removeClass("active")}),volantis.$search.click(function(t){t.stopPropagation()}),volantis.$header.ready(function(){volantis.$header.bind("keydown",function(t){if(9==t.keyCode)return!1;var e,o=!!document.all,a=o?(e=window.event.keyCode,window.event):(e=t.which,t);9==e&&(o?(a.keyCode=0,a.returnValue=!1):(a.which=0,a.preventDefault()))})})),o(),c(),i("#scroll-down").on("click",function(){s(volantis.$bodyAnchor)});try{document.addEventListener("pjax:complete",function(){i(function(){n=80,volantis.$header[0]&&(n=volantis.$header[0].clientHeight+16),a(),l(),r(),o(),c(),0!==volantis.$switcher.length&&i(document).click(function(t){volantis.$header.removeClass("z_search-open"),volantis.$switcher.removeClass("active")})})},{passive:!0})}catch(t){}}),window.location.hash&&(t=setInterval(function(){i("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).length&&(i("html, body").animate({scrollTop:i("#"+decodeURI(window.location.hash.split("#")[1]).replace(/\ /g,"-")).offset().top-40},500),clearInterval(t))},100))}(jQuery);