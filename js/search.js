var AlgoliaSearch,AzureSearch,BaiduSearch,SearchService="";!function(a){SearchService=function(e){var n=this;n.config=a.extend({per_page:10,selectors:{body:"body",form:".u-search-form",input:".u-search-input",container:"#u-search",modal:"#u-search .modal",modal_body:"#u-search .modal-body",modal_footer:"#u-search .modal-footer",modal_overlay:"#u-search .modal-overlay",modal_results:"#u-search .modal-results",modal_metadata:"#u-search .modal-metadata",modal_error:"#u-search .modal-error",modal_loading_bar:"#u-search .modal-loading-bar",modal_ajax_content:"#u-search .modal-ajax-content",modal_logo:"#u-search .modal-footer .logo",btn_close:"#u-search .btn-close",btn_next:"#u-search .btn-next",btn_prev:"#u-search .btn-prev"},brands:{hexo:{logo:"",url:""},google:{logo:"google.svg",url:"https://cse.google.com"},algolia:{logo:"algolia.svg",url:"https://www.algolia.com"},baidu:{logo:"baidu.svg",url:"http://zn.baidu.com/cse/home/index"},azure:{logo:"azure.svg",url:"https://azure.microsoft.com/en-us/services/search/"}},imagePath:ROOT+"img/"},e),n.dom={},n.percentLoaded=0,n.open=!1,n.queryText="",n.nav={next:-1,prev:-1,total:0,current:1},n.parseSelectors=function(){for(var e in n.config.selectors)n.dom[e]=a(n.config.selectors[e])},n.beforeQuery=function(){n.open||n.dom.container.fadeIn(),n.dom.input.each(function(e,t){a(t).val(n.queryText)}),document.activeElement.blur(),n.dom.modal_error.hide(),n.dom.modal_ajax_content.removeClass("loaded"),n.startLoading()},n.afterQuery=function(){n.dom.modal_body.scrollTop(0),n.dom.modal_ajax_content.addClass("loaded"),n.stopLoading()},n.search=function(e,t){n.beforeQuery(),n.search instanceof Function?n.query(n.queryText,e,function(){n.afterQuery()}):(console.log("query() does not exist."),n.onQueryError(n.queryText,""),n.afterQuery())},n.onQueryError=function(e,t){var a="",a="success"===t?'No result found for "'+e+'".':"timeout"===t?"Unfortunate timeout.":"Mysterious failure.";n.dom.modal_results.html(""),n.dom.modal_error.html(a),n.dom.modal_error.show()},n.nextPage=function(){-1!==n.nav.next&&n.search(n.nav.next)},n.prevPage=function(){-1!==n.nav.prev&&n.search(n.nav.prev)},n.getUrlRelativePath=function(e){var t=e.split("//"),a=t[1].indexOf("/"),o=t[1].substring(a);return-1!=o.indexOf("?")&&(o=o.split("?")[0]),o},n.buildResult=function(e,t,a){var o="",o="<li>";return o+="<a class='result search-result-fix' value='"+n.getUrlRelativePath(e)+"'>",o+="<span class='title'>"+t+"</span>",""!==a&&(o+="<span class='digest'>"+a+"</span>"),o+="</a>",o+="</li>"},n.close=function(){n.open=!1,n.dom.container.fadeOut(),n.dom.body.removeClass("modal-active")},n.onSubmit=function(e){e.preventDefault(),n.queryText=a(this).find(".u-search-input").val(),n.queryText&&n.search(1)},n.startLoading=function(){n.dom.modal_loading_bar.show(),n.loadingTimer=setInterval(function(){n.percentLoaded=Math.min(n.percentLoaded+5,95),n.dom.modal_loading_bar.css("width",n.percentLoaded+"%")},100)},n.stopLoading=function(){clearInterval(n.loadingTimer),n.dom.modal_loading_bar.css("width","100%"),n.dom.modal_loading_bar.fadeOut(),setTimeout(function(){n.percentLoaded=0,n.dom.modal_loading_bar.css("width","0%")},300)},n.addLogo=function(e){var t="";n.config.brands[e]&&n.config.brands[e].logo&&(t+="<a href='"+n.config.brands[e].url+"' class='"+e+"'>",t+='<img src="'+n.config.imagePath+n.config.brands[e].logo+'" />',t+="</a>",n.dom.modal_logo.html(t))},n.destroy=function(){n.dom.form.each(function(e,t){a(t).off("submit")}),n.dom.modal_overlay.off("click"),n.dom.btn_close.off("click"),n.dom.btn_next.off("click"),n.dom.btn_prev.off("click"),n.dom.container.remove()},n.init=function(){a("body").append(t),n.parseSelectors(),n.dom.modal_footer.show(),n.dom.form.each(function(e,t){a(t).on("submit",n.onSubmit)}),n.dom.modal_overlay.on("click",n.close),n.dom.btn_close.on("click",n.close),n.dom.btn_next.on("click",n.nextPage),n.dom.btn_prev.on("click",n.prevPage)},n.init()};var t='<div id="u-search"><div class="modal"> <header class="modal-header" class="clearfix"><form id="u-search-modal-form" class="u-search-form" name="uSearchModalForm"> <input type="text" id="u-search-modal-input" class="u-search-input" /> <button type="submit" id="u-search-modal-btn-submit" class="u-search-btn-submit"> <span class="fal fa-search"></span> </button></form> <a class="btn-close"> <span class="fal fa-times"></span> </a><div class="modal-loading"><div class="modal-loading-bar"></div></div> </header> <main class="modal-body"><ul class="modal-results modal-ajax-content"></ul> </main> <footer class="modal-footer clearfix"><div class="modal-metadata modal-ajax-content"> <strong class="range"></strong> of <strong class="total"></strong></div><div class="modal-error"></div> <div class="logo"></div> <a class="nav btn-next modal-ajax-content"> <span class="text">NEXT</span> <span class="fal fa-chevron-right"></span> </a> <a class="nav btn-prev modal-ajax-content"> <span class="fal fa-chevron-left"></span> <span class="text">PREV</span> </a> </footer></div><div class="modal-overlay"></div></div>'}(jQuery),function(a){"use strict";AlgoliaSearch=function(e){SearchService.apply(this,arguments);var r=this,t="https://"+r.config.appId+"-dsn.algolia.net/1/indexes/"+r.config.indexName;return r.addLogo("algolia"),r.buildResultList=function(e){var n="";return a.each(e,function(e,t){var a=t.permalink||t.path||"";!t.permalink&&t.path&&(a=ROOT+a);var o=t.title;n+=r.buildResult(a,o,"",e+1)}),n+="<script>$('.result.search-result-fix').click(function(event){var url = this.getAttribute('value');try{pjax.loadUrl(url)}catch(e){$(location).attr('href', url)}setTimeout(function(){$('#u-search').fadeOut(500);$('body').removeClass('modal-active');}, 300);});<\/script>"},r.buildMetadata=function(e){r.nav.current=e.page*e.hitsPerPage+1,r.nav.currentCount=e.hits.length,r.nav.total=parseInt(e.nbHits),r.dom.modal_metadata.children(".total").html(r.nav.total),r.dom.modal_metadata.children(".range").html(r.nav.current+"-"+(r.nav.current+r.nav.currentCount-1)),0<r.nav.total?r.dom.modal_metadata.show():r.dom.modal_metadata.hide(),e.page<e.nbPages-1?(r.nav.next=e.page+1+1,r.dom.btn_next.show()):(r.nav.next=-1,r.dom.btn_next.hide()),0<e.page?(r.nav.prev=e.page+1-1,r.dom.btn_prev.show()):(r.nav.prev=-1,r.dom.btn_prev.hide())},r.query=function(o,e,n){a.get(t,{query:o,page:e-1,hitsPerPage:r.config.per_page,"x-algolia-application-id":r.config.appId,"x-algolia-api-key":r.config.apiKey},function(e,t){var a;"success"===t&&e.hits&&0<e.hits.length?(a=r.buildResultList(e.hits),r.dom.modal_results.html(a)):r.onQueryError(o,t),r.buildMetadata(e),n&&n(e)})},r}}(jQuery),function(a){"use strict";AzureSearch=function(e){SearchService.apply(this,arguments);var i=this,t="https://"+i.config.serviceName+".search.windows.net/indexes/"+i.config.indexName+"/docs?api-version=2015-02-28";return i.nav.current=1,i.addLogo("azure"),i.buildResultList=function(e){var r="";return a.each(e,function(e,t){var a=t.permalink||t.path||"";!t.permalink&&t.path&&(a="/"+a);var o=t.title,n=t.excerpt||"";r+=i.buildResult(a,o,n)}),r+="<script>$('.result.search-result-fix').click(function(event){var url = this.getAttribute('value');try{pjax.loadUrl(url)}catch(e){$(location).attr('href', url)}setTimeout(function(){$('#u-search').fadeOut(500);$('body').removeClass('modal-active');}, 300);});<\/script>"},i.buildMetadata=function(e,t){i.nav.current=t,i.nav.currentCount=e.value.length,i.nav.total=parseInt(e["@odata.count"]),i.dom.modal_metadata.children(".total").html(i.nav.total),i.dom.modal_metadata.children(".range").html(i.nav.current+"-"+(i.nav.current+i.nav.currentCount-1)),0<i.nav.total?i.dom.modal_metadata.show():i.dom.modal_metadata.hide(),i.nav.current+i.nav.currentCount<=i.nav.total?(i.nav.next=i.nav.current+i.nav.currentCount,i.dom.btn_next.show()):(i.nav.next=-1,i.dom.btn_next.hide()),1<i.nav.current?(i.nav.prev=i.nav.current-i.config.per_page,i.dom.btn_prev.show()):(i.nav.prev=-1,i.dom.btn_prev.hide())},i.query=function(o,n,r){a.ajax({url:t,headers:{Accept:"application/json","api-key":i.config.queryKey},data:{search:o,$orderby:"date desc",$skip:n-1,$top:i.config.per_page,$count:!0},type:"GET",success:function(e,t){var a;"success"===t&&e.value&&0<e.value.length?(a=i.buildResultList(e.value),i.dom.modal_results.html(a)):i.onQueryError(o,t),i.buildMetadata(e,n),r&&r(e)}})},i}}(jQuery),function(r){"use strict";BaiduSearch=function(e){SearchService.apply(this,arguments);var n=this;return n.addLogo("baidu"),n.buildResultList=function(e,a){var o="";return r.each(e,function(e,t){n.contentSearch(t,a)&&(o+=n.buildResult(t.linkUrl,t.title,t.abstract))}),o+="<script>$('.result.search-result-fix').click(function(event){var url = this.getAttribute('value');try{pjax.loadUrl(url)}catch(e){$(location).attr('href', url)}setTimeout(function(){$('#u-search').fadeOut(500);$('body').removeClass('modal-active');}, 300);});<\/script>"},n.buildMetadata=function(e){},n.loadScript=function(){n.dom.input.each(function(e,t){r(t).attr("disabled",!0)});var e="<script src='http://zhannei.baidu.com/api/customsearch/apiaccept?sid="+n.config.apiId+"&v=2.0&callback=customSearch.initBaidu' type='text/javascript' charset='utf-8'><\/script>";n.dom.body.append(e)},n.initBaidu=function(){n.cse=new BCse.Search(n.config.apiId),n.dom.input.each(function(e,t){r(t).attr("disabled",!1)})},n.query=function(t,e,a){n.cse.getResult(t,function(e){console.log("Searching: "+t),n.cse.getError(function(e){console.log(e)}),0<e.length?(n.buildResultList(e,t),n.cse.getSearchInfo(t,function(e){console.log(e),n.buildMetadata(e)})):(n.nav.total=0,n.nav.next=-1,n.nav.prev=-1,n.dom.modal_metadata.hide(),n.dom.btn_next.hide(),n.dom.btn_prev.hide(),n.onQueryError(t,"success")),a instanceof Function&&a()})},n.loadScript(),n}}(jQuery);var HexoSearch,GoogleCustomSearch="";!function(t){"use strict";GoogleCustomSearch=function(e){SearchService.apply(this,arguments);var i=this;return i.addLogo("google"),i.buildResultList=function(e){var r="";return t.each(e,function(e,t){var a=t.link,o=t.title,n=(t.htmlSnippet||"").replace("<br>","");r+=i.buildResult(a,o,n)}),r+="<script>$('.result.search-result-fix').click(function(event){var url = this.getAttribute('value');try{pjax.loadUrl(url)}catch(e){$(location).attr('href', url)}setTimeout(function(){$('#u-search').fadeOut(500);$('body').removeClass('modal-active');}, 300);});<\/script>"},i.buildMetadata=function(e){e.queries&&e.queries.request&&"0"!==e.queries.request[0].totalResults?(i.nav.current=e.queries.request[0].startIndex,i.nav.currentCount=e.queries.request[0].count,i.nav.total=parseInt(e.queries.request[0].totalResults),i.dom.modal_metadata.children(".total").html(i.nav.total),i.dom.modal_metadata.children(".range").html(i.nav.current+"-"+(i.nav.current+i.nav.currentCount-1)),i.dom.modal_metadata.show()):i.dom.modal_metadata.hide(),e.queries&&e.queries.nextPage?(i.nav.next=e.queries.nextPage[0].startIndex,i.dom.btn_next.show()):(i.nav.next=-1,i.dom.btn_next.hide()),e.queries&&e.queries.previousPage?(i.nav.prev=e.queries.previousPage[0].startIndex,i.dom.btn_prev.show()):(i.nav.prev=-1,i.dom.btn_prev.hide())},i.query=function(o,e,n){t.get("https://www.googleapis.com/customsearch/v1",{key:i.config.apiKey,cx:i.config.engineId,q:o,start:e,num:i.config.per_page},function(e,t){var a;"success"===t&&e.items&&0<e.items.length?(a=i.buildResultList(e.items),i.dom.modal_results.html(a)):i.onQueryError(o,t),i.buildMetadata(e),n&&n()})},i}}(jQuery),function(h){"use strict";HexoSearch=function(e){SearchService.apply(this,arguments);var r=this;return r.config.endpoint=ROOT+((e||{}).endpoint||"content.json"),r.config.endpoint=r.config.endpoint.replace("//","/"),r.cache="",r.contentSearch=function(r,e){var i=r.title.trim().toLowerCase(),s=r.text.trim().toLowerCase(),c=e.trim().toLowerCase().split(" "),l=!1,u=-1,d=-1,m=-1;return""!==i&&""!==s&&h.each(c,function(e,t){var a,o,n;u=i.indexOf(t),d=s.indexOf(t),u<0&&d<0?l=!1:(l=!0,d<0&&(d=0),0===e&&(m=d)),l&&(s=r.text.trim(),(o=a=0)<=m?(o=0===(a=Math.max(m-40,0))?Math.min(200,s.length):Math.min(m+120,s.length),n=s.substring(a,o),c.forEach(function(e){var t=new RegExp(e,"gi");n=n.replace(t,"<b mark>"+e+"</b>")}),r.digest=n+"......"):(o=Math.min(200,s.length),r.digest=s.trim().substring(0,o)))}),l},r.buildResultList=function(e,a){var o="";return h.each(e,function(e,t){r.contentSearch(t,a)&&(o+=r.buildResult(t.permalink,t.title,t.digest))}),o+="<script>$('.result.search-result-fix').click(function(event){var url = this.getAttribute('value');try{pjax.loadUrl(url)}catch(e){$(location).attr('href', url)}setTimeout(function(){$('#u-search').fadeOut(500);$('body').removeClass('modal-active');}, 300);});<\/script>"},r.buildMetadata=function(e){r.dom.modal_footer.hide()},r.query=function(o,e,n){var t;r.cache?(t="",t+=r.buildResultList(r.cache.pages,o),t+=r.buildResultList(r.cache.posts,o),r.dom.modal_results.html(t),r.buildMetadata(r.cache),n&&n(r.cache)):h.get(r.config.endpoint,{key:r.config.apiKey,cx:r.config.engineId,q:o,start:e,num:r.config.per_page},function(e,t){var a;"success"!==t||!e||!e.posts&&!e.pages||e.posts.length<1&&e.pages.length<1?r.onQueryError(o,t):(r.cache=e,a="",a+=r.buildResultList(e.pages,o),a+=r.buildResultList(e.posts,o),r.dom.modal_results.html(a)),r.buildMetadata(e),n&&n(e)})},r}}(jQuery);