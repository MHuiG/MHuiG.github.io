const e={requestAPI:(e,t,r)=>{let n=5;!function a(){return new Promise(((o,s)=>{let c=0,l=setTimeout((()=>{0===c&&(c=2,l=null,s("请求超时"),0==n&&r())}),5e3);fetch(e).then((function(e){if(2!==c&&(clearTimeout(l),o(e),l=null,c=1),e.ok)return e.json();throw new Error("Network response was not ok.")})).then((function(e){n=0,t(e)}))["catch"]((function(e){n>0?(n-=1,setTimeout((()=>{a()}),5e3)):r()}))}))}()},layout:t=>{const r=t.el;e.requestAPI(t.api,(function(e){r.querySelector(".loading-wrap").remove();const n=e.content;var a="";n.forEach(((e,r)=>{var n='<div class="user-card">';n+='<a class="card-link" target="_blank" rel="external nofollow noopener noreferrer"',n+=' href="'+e.url+'">',n+='<img src="'+(e.avatar||t.avatar)+'" onerror="javascript:this.src=\''+t.avatar+"';\">",n+='<div class="name"><span>'+e.title+"</span></div>",n+="</a>",a+=n+="</div>"})),r.querySelector(".group-body").innerHTML=a}),(function(){try{r.querySelector(".loading-wrap svg").remove(),r.querySelector(".loading-wrap p").innerText("加载失败，请稍后重试。")}catch(e){}}))},start:()=>{const t=document.getElementsByClassName("friendsjs-wrap");for(var r=0;r<t.length;r++){const a=t[r],o=a.getAttribute("api");if(null!=o){var n=new Object;n.el=a,n.api=o,n["class"]=a.getAttribute("class"),n.avatar="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/avatar/round/3442075.svg",e.layout(n)}}}};e.start(),document.addEventListener("pjax:complete",(function(){e.start()}));