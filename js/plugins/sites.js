const t={requestAPI:(t,e,n)=>{let r=5;!function s(){return new Promise((a,o)=>{let c=0,i=setTimeout(()=>{0===c&&(c=2,i=null,o("请求超时"),0==r&&n())},5e3);fetch(t).then((function(t){if(2!==c&&(clearTimeout(i),a(t),i=null,c=1),t.ok)return t.json();throw new Error("Network response was not ok.")})).then((function(t){r=0,e(t)}))["catch"]((function(t){r>0?(r-=1,setTimeout(()=>{s()},5e3)):n()}))})}()},layout:e=>{const n=$(e.el)[0];t.requestAPI(e.api,(function(t){$(n).find(".loading-wrap").remove();t.content.forEach((t,r)=>{var s='<div class="site-card">';s+='<a class="card-link" target="_blank" rel="external nofollow noopener noreferrer" href="'+t.url+'">',s+='<img src="'+(t.screenshot||"https://image.thum.io/get/width/1024/crop/768/"+t.url)+'" onerror="javascript:this.src=\''+e.screenshot+"';\"/>",s+='<div class="info">',s+='<img src="'+(t.avatar||e.avatar)+'" onerror="javascript:this.src=\''+e.avatar+"';\"/>",s+='<span class="title">'+t.title+"</span>",s+='<span class="desc">'+(t.description||t.url)+"</span>",s+="</div>",s+="</a>",s+="</div>",$(n).find(".group-body").append(s)})}),(function(){$(n).find(".loading-wrap svg").remove(),$(n).find(".loading-wrap p").text("加载失败，请稍后重试。")}))},start:e=>{const n=document.getElementsByClassName("sitesjs-wrap");for(var r=0;r<n.length;r++){const s=n[r],a=s.getAttribute("api");if(null!=a)(e=new Object)["class"]=s.getAttribute("class"),e.el=s,e.api=a,e.avatar="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/link/8f277b4ee0ecd.svg",e.screenshot="https://cdn.jsdelivr.net/gh/cdn-x/placeholder@1.0.1/cover/76b86c0226ffd.svg",t.layout(e)}}};$((function(){t.start()})),document.addEventListener("pjax:complete",(function(){t.start()}));